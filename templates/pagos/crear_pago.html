{% extends 'base.html' %}

{% block title %}Registrar Pago - Sistema Eléctrico{% endblock %}

{% block page_title %}Registrar Pago{% endblock %}

{% block content %}
    <div>
        <a href="{% url 'sistemaGestion:lista_pagos' %}" class="boton boton-secundario">Volver</a>
    </div>

    <div class="tarjeta">
        <form method="post">
            {% csrf_token %}
            
            <div class="grupo-formulario">
                <label for="boleta">Boleta:</label>
                <select id="boleta" name="boleta" required>
                    <option value="">Seleccionar boleta</option>
                    {% for boleta in boletas %}
                        {% if boleta.estado == 'Pendiente' %}
                            <option value="{{ boleta.id_boleta }}">{{ boleta.id_boleta }} - {{ boleta.cliente_nombre }} - ${{ boleta.monto_total|floatformat:0 }}</option>
                        {% endif %}
                    {% endfor %}
                </select>
            </div>

            <div class="grupo-formulario">
                <label for="fecha_pago">Fecha de Pago:</label>
                <input type="date" id="fecha_pago" name="fecha_pago" required>
            </div>

            <div class="grupo-formulario">
                <label for="monto_pagado">Monto Pagado:</label>
                <input type="number" id="monto_pagado" name="monto_pagado" step="0.01" required>
            </div>

            <div class="grupo-formulario">
                <label for="metodo_pago">Método de Pago:</label>
                <select id="metodo_pago" name="metodo_pago" required>
                    <option value="">Seleccionar método</option>
                    <option value="Efectivo">Efectivo</option>
                    <option value="Transferencia Bancaria">Transferencia Bancaria</option>
                    <option value="Tarjeta de Crédito">Tarjeta de Crédito</option>
                    <option value="Cheque">Cheque</option>
                </select>
            </div>

            <div class="grupo-formulario">
                <label for="numero_referencia">Número de Referencia:</label>
                <input type="text" id="numero_referencia" name="numero_referencia" placeholder="Número de transferencia, cheque, etc.">
            </div>

            <div class="grupo-formulario">
                <label for="estado_pago">Estado del Pago:</label>
                <select id="estado_pago" name="estado_pago" required>
                    <option value="">Seleccionar estado</option>
                    <option value="Confirmado">Confirmado</option>
                    <option value="Pendiente">Pendiente</option>
                    <option value="Rechazado">Rechazado</option>
                </select>
            </div>

            <button type="submit" class="boton boton-primario">Registrar Pago</button>
        </form>
    </div>
{% endblock %}

