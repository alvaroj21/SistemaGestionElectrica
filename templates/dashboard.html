{% extends 'base.html' %}

{% block title %}Interfaz - Sistema Eléctrico{% endblock %}

{% block page_title %}Interfaz{% endblock %}

{% block content %}
    
    <div>
        <h3><i class="fas fa-user"></i> Bienvenido, {{ request.session.nombre|default:request.session.username }}</h3>
        <p><strong>Rol:</strong> {{ request.session.rol|capfirst }} | <strong>Usuario:</strong> {{ request.session.username }}</p>
    </div>

    <div class="grid-estadisticas">
        
    {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-users"></i> Clientes</h4>
            <p>{{ total_clientes }}</p>
            <small>Total registrados</small>
        </div>
        {% endif %}

    {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-file-contract"></i> Contratos</h4>
            <p>{{ total_contratos }}</p>
            <small>Contratos activos</small>
        </div>
        {% endif %}

    {% if request.session.rol == 'Administrador' or request.session.rol == 'Eléctrico' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-tachometer-alt"></i> Medidores</h4>
            <p>{{ total_medidores }}</p>
            <small>Medidores instalados</small>
        </div>
        {% endif %}

    {% if request.session.rol == 'Administrador' or request.session.rol == 'Eléctrico' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-chart-line"></i> Lecturas Pendientes</h4>
            <p>{{ lecturas_pendientes }}</p>
            <small>Requieren atención</small>
        </div>
        {% endif %}

    {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-file-invoice"></i> Boletas</h4>
            <p>{{ boletas_emitidas }}</p>
            <small>Emitidas este mes</small>
        </div>
        {% endif %}

    {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
        <div class="tarjeta-estadistica">
            <h4><i class="fas fa-credit-card"></i> Pagos</h4>
            <p>{{ pagos_realizados }}</p>
            <small>Procesados este mes</small>
        </div>
        {% endif %}
    </div>

    <div class="accesos-rapidos">
        <h3><i class="fas fa-bolt"></i> Accesos Rápidos</h3>
        
        <div>
            {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
            <a href="{% url 'sistemaGestion:lista_clientes' %}" class="boton">
                <i class="fas fa-users"></i> Ver Clientes
            </a>
            {% endif %}

            {% if request.session.rol == 'Administrador' or request.session.rol == 'Eléctrico' %}
            <a href="{% url 'sistemaGestion:lista_medidores' %}" class="boton">
                <i class="fas fa-tachometer-alt"></i> Ver Medidores
            </a>
            {% endif %}

            {% if request.session.rol == 'Administrador' or request.session.rol == 'Eléctrico' %}
            <a href="{% url 'sistemaGestion:lista_lecturas' %}" class="boton">
                <i class="fas fa-chart-line"></i> Ver Lecturas
            </a>
            {% endif %}

            {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
            <a href="{% url 'sistemaGestion:lista_boletas' %}" class="boton">
                <i class="fas fa-file-invoice"></i> Ver Boletas
            </a>
            {% endif %}

            {% if request.session.rol == 'Administrador' or request.session.rol == 'Finanzas' %}
            <a href="{% url 'sistemaGestion:lista_pagos' %}" class="boton">
                <i class="fas fa-credit-card"></i> Ver Pagos
            </a>
            {% endif %}

            {% if request.session.rol == 'admin' or request.session.rol == 'finanzas' %}
            <a href="{% url 'sistemaGestion:lista_tarifas' %}" class="boton">
                <i class="fas fa-dollar-sign"></i> Ver Tarifas
            </a>
            {% endif %}

            {% if request.session.rol == 'Administrador' %}
            <a href="{% url 'sistemaGestion:lista_usuarios' %}" class="boton">
                <i class="fas fa-user-cog"></i> Ver Usuarios
            </a>
            {% endif %}
        </div>
    </div>
    
{% endblock %}
