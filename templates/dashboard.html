{% extends 'base.html' %}

{% block title %}Interfaz - Sistema Eléctrico{% endblock %}

{% block page_title %}Interfaz{% endblock %}

{% block content %}
    <div class="dashboard">
    <!-- Información del usuario -->
    <div class="informacion-usuario">
        <h3><i class="fas fa-user"></i> Bienvenido, {{ nombre }}</h3>
        <p><strong>Rol:</strong> {{ rol|capfirst }} | <strong>Usuario:</strong> {{ username }}</p>
    </div>

    <!-- Panel de estadísticas -->
    <div class="grilla-estadisticas">
        <!-- Solo mostrar estadísticas según permisos -->
        {% if 'clientes' in permisos %}
        <div class="tarjeta-estadistica clientes">
            <h4><i class="fas fa-users"></i> Clientes</h4>
            <p>{{ total_clientes }}</p>
            <small>Total registrados</small>
        </div>
        {% endif %}

        {% if 'contratos' in permisos %}
        <div class="tarjeta-estadistica contratos">
            <h4><i class="fas fa-file-contract"></i> Contratos</h4>
            <p>{{ total_contratos }}</p>
            <small>Contratos activos</small>
        </div>
        {% endif %}

        {% if 'medidores' in permisos %}
        <div class="tarjeta-estadistica medidores">
            <h4><i class="fas fa-tachometer-alt"></i> Medidores</h4>
            <p>{{ total_medidores }}</p>
            <small>Medidores instalados</small>
        </div>
        {% endif %}

        {% if 'lecturas' in permisos %}
        <div class="tarjeta-estadistica lecturas">
            <h4><i class="fas fa-chart-line"></i> Lecturas Pendientes</h4>
            <p>{{ lecturas_pendientes }}</p>
            <small>Requieren atención</small>
        </div>
        {% endif %}

        {% if 'boletas' in permisos %}
        <div class="tarjeta-estadistica boletas">
            <h4><i class="fas fa-file-invoice"></i> Boletas</h4>
            <p>{{ boletas_emitidas }}</p>
            <small>Emitidas este mes</small>
        </div>
        {% endif %}

        {% if 'pagos' in permisos %}
        <div class="tarjeta-estadistica pagos">
            <h4><i class="fas fa-credit-tarjeta"></i> Pagos</h4>
            <p>{{ gastos_pagados }}</p>
            <small>Procesados este mes</small>
        </div>
        {% endif %}
    </div>

    <!-- Accesos rápidos según permisos -->
    <div class="accesos-rapidos">
        <h3><i class="fas fa-bolt"></i> Accesos Rápidos</h3>
        <div>
            
            <!-- Módulo Eléctrico -->
            {% if 'medidores' in permisos or 'lecturas' in permisos %}
            <div class="seccion-rapida">
                <h4>Módulo Eléctrico</h4>
                {% if 'medidores' in permisos %}
                <a href="{% url 'sistemaGestion:lista_medidores' %}" class="boton boton-contorno">
                    <i class="fas fa-tachometer-alt"></i> Gestionar Medidores
                </a>
                {% endif %}
                {% if 'lecturas' in permisos %}
                <a href="{% url 'sistemaGestion:lista_lecturas' %}" class="boton boton-contorno">
                    <i class="fas fa-chart-line"></i> Ver Lecturas
                </a>
                {% endif %}
            </div>
            {% endif %}

            <!-- Módulo Finanzas -->
            {% if 'clientes' in permisos or 'contratos' in permisos or 'boletas' in permisos or 'pagos' in permisos %}
            <div class="seccion-rapida">
                <h4>Módulo Finanzas</h4>
                {% if 'clientes' in permisos %}
                <a href="{% url 'sistemaGestion:lista_clientes' %}" class="boton boton-contorno">
                    <i class="fas fa-users"></i> Gestionar Clientes
                </a>
                {% endif %}
                {% if 'contratos' in permisos %}
                <a href="{% url 'sistemaGestion:lista_contratos' %}" class="boton boton-contorno">
                    <i class="fas fa-file-contract"></i> Ver Contratos
                </a>
                {% endif %}
                {% if 'boletas' in permisos %}
                <a href="{% url 'sistemaGestion:lista_boletas' %}" class="boton boton-contorno">
                    <i class="fas fa-file-invoice"></i> Gestionar Boletas
                </a>
                {% endif %}
                {% if 'pagos' in permisos %}
                <a href="{% url 'sistemaGestion:lista_pagos' %}" class="boton boton-contorno">
                    <i class="fas fa-credit-tarjeta"></i> Ver Pagos
                </a>
                {% endif %}
            </div>
            {% endif %}

            <!-- Configuración (solo admin) -->
            {% if rol == 'admin' %}
            <div class="seccion-rapida">
                <h4>Configuración</h4>
                <a href="{% url 'sistemaGestion:lista_tarifas' %}" class="boton boton-contorno">
                    <i class="fas fa-dollar-sign"></i> Gestionar Tarifas
                </a>
                <a href="{% url 'sistemaGestion:lista_usuarios' %}" class="boton boton-contorno">
                    <i class="fas fa-user-cog"></i> Gestionar Usuarios
                </a>
            </div>
            {% endif %}

            <!-- Notificaciones (para todos) -->
            <div class="seccion-rapida">
                <h4>Notificaciones</h4>
                <a href="{% url 'sistemaGestion:lista_notificaciones' %}" class="boton boton-contorno">
                    <i class="fas fa-bell"></i> Ver Notificaciones
                </a>
            </div>
        </div>
    </div>
    </div>
{% endblock %}



