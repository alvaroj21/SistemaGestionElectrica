{% extends 'base.html' %}

{% block title %}Eliminar Medidor - Sistema Eléctrico{% endblock %}

{% block page_title %}Eliminar Medidor{% endblock %}

{% block content %}
    
    <!-- Alerta de Advertencia -->
    <div class="informacion-login">
        <h4>
            <i class="fas fa-exclamation-triangle"></i> ¡Atención!
        </h4>
        <p>Esta acción eliminará permanentemente el medidor del sistema.</p>
        <p>
            <strong>Esta acción NO se puede deshacer.</strong> 
            Asegúrate de que realmente deseas eliminar este medidor.
        </p>
    </div>

    <!-- Información del Medidor -->
    <h3><i class="fas fa-tachometer-alt"></i> Datos del Medidor a Eliminar</h3>
    
    <table>
        <tbody>
            <tr>
                <td><strong>Número de Medidor:</strong></td>
                <td>{{ medidor.numero_medidor }}</td>
            </tr>
            <tr>
                <td><strong>Fecha de Instalación:</strong></td>
                <td>{{ medidor.fecha_instalacion }}</td>
            </tr>
            <tr>
                <td><strong>Ubicación:</strong></td>
                <td>{{ medidor.ubicacion }}</td>
            </tr>
            <tr>
                <td><strong>Estado del Medidor:</strong></td>
                <td>{{ medidor.estado_medidor }}</td>
            </tr>
            {% if medidor.imagen_ubicacion %}
            <tr>
                <td><strong>Imagen de Ubicación:</strong></td>
                <td><a href="{{ medidor.imagen_ubicacion }}" target="_blank">Ver imagen</a></td>
            </tr>
            {% endif %}
        </tbody>
    </table>

    <!-- Botones de Acción -->
    <div>
        <!-- Botón Cancelar -->
        <a href="{% url 'sistemaGestion:lista_medidores' %}" class="boton">
            <i class="fas fa-times"></i> Cancelar
        </a>
        
        <!-- Formulario de Confirmación -->
        <form method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="boton boton-peligro" 
                    onclick="return confirm('¿Estás completamente seguro de que deseas eliminar este medidor?')">
                <i class="fas fa-trash-alt"></i> Sí, Eliminar Medidor
            </button>
        </form>
    </div>

    <!-- Información adicional -->
    <div class="informacion-login">
        <strong>Nota:</strong> Al eliminar este medidor, se perderán todas las lecturas asociadas. 
        Verifica que no tenga contratos o lecturas activas antes de proceder.
    </div>
{% endblock %}
